# 📈 سیستم مشاور مالی هوشمند برای بورس ایران

این پروژه یک سیستم هوشمند برای تحلیل و پیش‌بینی وضعیت بازار بورس ایران است. سیستم با استفاده از تحلیل ترکیبی (تکنیکال و فاندامنتال مبتنی بر اخبار)، سیگنال‌های خرید، فروش یا نگهداری سهام را ارائه می‌دهد.

## 🌟 قابلیت‌ها

- **جمع‌آوری خودکار داده‌ها**: دریافت روزانه قیمت سهام از `tsetmc.com` و اخبار اقتصادی از منابع معتبر.
- **تحلیل تکنیکال**: محاسبه اندیکاتورهای کلیدی مانند `MA`, `RSI` و `MACD`.
- **تحلیل فاندامنتال**: تحلیل احساسات اخبار فارسی با استفاده از مدل‌های پیشرفته NLP.
- **مدل ترکیبی (Hybrid Model)**: استفاده از `LSTM` برای تحلیل داده‌های زمانی و `MLP` برای تصمیم‌گیری نهایی.
- **ارائه API**: یک API مبتنی بر `FastAPI` برای دریافت پیش‌بینی‌ها و سیگنال‌ها.
- **بک‌تستینگ**: قابلیت ارزیابی استراتژی معاملاتی بر روی داده‌های تاریخی.

## 🛠️ فناوری‌های استفاده شده

- **زبان برنامه‌نویسی**: Python 3.10+
- **جمع‌آوری داده**: `requests`, `BeautifulSoup4`
- **تحلیل داده**: `pandas`, `scikit-learn`
- **مدل‌سازی**: `PyTorch`, `Hugging Face Transformers`
- **پایگاه داده**: `SQLite`
- **وب سرویس**: `FastAPI`, `uvicorn`

## 🚀 راهنمای نصب و اجرا

### ۱. پیش‌نیازها

- پایتون (نسخه 3.10 یا بالاتر)
- `pip` برای مدیریت بسته‌ها

### ۲. نصب وابستگی‌ها

ابتدا پروژه را کلون کرده و سپس وارد پوشه پروژه شوید. سپس دستور زیر را برای نصب تمام کتابخانه‌های مورد نیاز اجرا کنید:

```bash
pip install -r requirements.txt
```

### ۳. راه‌اندازی اولیه

#### الف. ایجاد پایگاه داده

برای ساخت پایگاه داده اولیه و جداول مورد نیاز، اسکریپت زیر را اجرا کنید:

```bash
python database_setup.py
```
این دستور یک فایل به نام `financial_data.db` در ریشه پروژه ایجاد می‌کند.

#### ب. جمع‌آوری داده‌ها (اختیاری)

شما می‌توانید اسکریپت‌های موجود در پوشه `data_collection` را برای جمع‌آوری داده‌های جدید اجرا کنید.

- **دریافت قیمت سهام**:
  ```bash
  python data_collection/tsetmc_scraper.py
  ```
- **دریافت اخبار**:
  ```bash
  python data_collection/news_scraper.py
  ```

### ۴. آموزش مدل

برای آموزش مدل با استفاده از داده‌های نمونه، دستور زیر را اجرا کنید:

```bash
python modeling/train.py
```
**توجه**: در نسخه فعلی، این اسکریپت از داده‌های ساختگی استفاده می‌کند. برای آموزش با داده‌های واقعی، باید اسکریپت را برای خواندن داده از پایگاه داده `financial_data.db` تغییر دهید.

### ۵. اجرای API سرور

برای راه‌اندازی سرور API، از اسکریپت `run_api.sh` استفاده کنید:

```bash
chmod +x run_api.sh
./run_api.sh
```

سرور بر روی آدرس `http://localhost:8000` فعال خواهد شد. برای مشاهده مستندات تعاملی API، به آدرس `http://localhost:8000/docs` مراجعه کنید.

### ۶. اجرای بک‌تست

برای ارزیابی عملکرد استراتژی بر روی داده‌های تاریخی (نمونه)، دستور زیر را اجرا کنید:

```bash
python data_analysis/backtesting.py
```

## 📂 ساختار پروژه

```
.
├── api/                # سورس کدهای مربوط به API
│   ├── __init__.py
│   └── main.py
├── data_analysis/      # اسکریپت‌های تحلیل داده و بک‌تستینگ
│   ├── __init__.py
│   ├── backtesting.py
│   ├── sentiment_analysis.py
│   └── technical_analysis.py
├── data_collection/    # اسکریپت‌های جمع‌آوری داده
│   ├── __init__.py
│   ├── news_scraper.py
│   └── tsetmc_scraper.py
├── modeling/           # ساختار مدل و اسکریپت آموزش
│   ├── __init__.py
│   ├── hybrid_model.py
│   └── train.py
├── database_setup.py   # اسکریپت ایجاد پایگاه داده
├── financial_data.db   # پایگاه داده SQLite
├── requirements.txt    # لیست وابستگی‌های پروژه
├── run_api.sh          # اسکریپت اجرای سرور
└── README.md           # مستندات پروژه
```

## 🤝 مشارکت

از هرگونه مشارکت در این پروژه استقبال می‌شود. شما می‌توانید از طریق `Pull Request` یا `Issue` در بهبود این سیستم به ما کمک کنید.
